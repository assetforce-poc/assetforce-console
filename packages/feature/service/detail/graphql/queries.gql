#import "@assetforce/graphql"

query GetServiceDetail($input: ServiceOneInput!) {
  service {
    one(input: $input) {
      id
      slug
      displayName
      type
      lifecycle
      repoUrl
      docsUrl
      tags
      health {
        status
        lastCheckedAt
        lastSuccessAt
        lastFailureAt
      }
      createdAt
      updatedAt

      dependencies {
        target {
          id
          slug
          displayName
        }
        critical
      }

      instances {
        id
        key
        zone
        environment
        baseUrl

        endpoint {
          graphql {
            endpoint
            priority
          }
          rest {
            basePath
            priority
          }
          grpc {
            address
            priority
          }
        }

        health {
          path
          enabled
          lastStatus
          lastCheckedAt
          lastFailureReason
        }

        probeApprovalStatus
      }
    }
  }
}
