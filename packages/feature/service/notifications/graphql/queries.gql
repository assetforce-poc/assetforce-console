#import "@assetforce/graphql"

fragment SchemaChangeFields on SchemaChange {
  id
  subgraphName
  hash {
    old
    new
  }
  severity
  diffSummary
  detectedAt
}

fragment NotificationFields on SchemaChangeNotification {
  id
  source
  target
  contract
  summary
  schemaChange {
    ...SchemaChangeFields
  }
  detectedAt
  acknowledged
  acknowledgedAt
  acknowledgedBy
}

query ListNotifications($input: NotificationListInput!) {
  exchange {
    notification {
      list(input: $input) {
        items {
          ...NotificationFields
        }
        total
        limit
        offset
      }
    }
  }
}

fragment DeprecationNotificationFields on ContractDeprecationNotification {
  id
  contractId
  source
  target
  contractIdentifier
  reason
  sinceVersion
  alternative
  removalVersion
  createdAt
  acknowledged
  acknowledgedAt
  acknowledgedBy
}

query ListDeprecationNotifications($input: DeprecationNotificationListInput!) {
  exchange {
    notification {
      deprecation {
        list(input: $input) {
          items {
            ...DeprecationNotificationFields
          }
          total
          limit
          offset
        }
      }
    }
  }
}
